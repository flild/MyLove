/* --- CONFIGURATION --- */
:root {
    --color-bg-milk: #FDF6E3;
    --color-red-twin-peaks: #8a0303;
    --color-toad-green: #588157;
    --color-dark-blue: #1e3a4a;
    --font-hand: 'Courier New', monospace;
}

/* --- BASE --- */
body {
    background-color: var(--color-bg-milk);
    font-family: 'Playfair Display', serif;
    overflow-x: hidden;
    color: #2c2c2c;
}

.font-typewriter { font-family: 'Special Elite', cursive; }
.font-handwriting { font-family: 'Special Elite', cursive; color: #333; }

/* --- BACKGROUNDS --- */
.bg-texture {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.05'/%3E%3C/svg%3E");
    pointer-events: none; z-index: -1;
}

.curtain {
    position: fixed; top: 0; height: 100%; width: 30px;
    background: repeating-linear-gradient(90deg, var(--color-red-twin-peaks), var(--color-red-twin-peaks) 10px, #5e0000 10px, #5e0000 20px);
    z-index: 20;
}
.curtain-left { left: 0; }
.curtain-right { right: 0; }
@media(max-width: 768px) { .curtain { display: none; } }

.zigzag-separator {
    height: 15px;
    background: repeating-linear-gradient(45deg, #ddd, #ddd 10px, transparent 10px, transparent 20px);
    margin: 40px 0; opacity: 0.5;
}

/* --- COMPONENTS --- */

/* 1. Timer */
.timer-card {
    background: #fff; border: 1px solid #ccc; box-shadow: 2px 2px 0 #333;
    padding: 10px; border-radius: 4px;
    transition: transform 0.2s;
}
.timer-card:hover { transform: translateY(-3px); }

/* 2. Heist Section (Money Heist) */
.heist-card {
    transition: transform 0.3s ease;
}
.blink-text { animation: blink 2s infinite; }
@keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }

/* 3. Lake Ripple Animation */
.lake-ripple {
    position: absolute; border: 2px solid rgba(255, 255, 255, 0.4);
    border-radius: 50%; opacity: 0;
    animation: rippleEffect 3s infinite linear;
}
@keyframes rippleEffect {
    0% { transform: scale(0.8); opacity: 0.5; border-width: 4px; }
    100% { transform: scale(1.5); opacity: 0; border-width: 0px; }
}

/* 4. Kaiju Controls */
.feed-btn {
    background: white; border: 1px solid #ddd; padding: 8px;
    border-radius: 8px; transition: transform 0.1s;
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
}
.feed-btn:active { transform: scale(0.95); }

/* 5. Coffee Cup */
.cup-container { position: relative; width: 120px; height: 90px; margin: 0 auto; cursor: pointer; }
.cup-body { width: 100%; height: 100%; background: #fff; border-bottom-left-radius: 50% 40%; border-bottom-right-radius: 50% 40%; border: 3px solid #333; overflow: hidden; position: relative; z-index: 2; }
.cup-handle { position: absolute; right: -30px; top: 10px; width: 35px; height: 50px; border: 3px solid #333; border-radius: 0 50% 50% 0; z-index: 1; }
.coffee-liquid { position: absolute; bottom: 0; width: 100%; height: 0%; background: #6F4E37; transition: height 1.5s ease-out; }
.steam span { display: block; width: 8px; height: 20px; background: #ccc; border-radius: 50%; filter: blur(4px); position: absolute; top: -30px; opacity: 0; transition: opacity 1s; animation: rise 2s infinite; }
.steam span:nth-child(1) { left: 40%; animation-delay: 0s; }
.steam span:nth-child(2) { left: 50%; animation-delay: 0.5s; }
.steam span:nth-child(3) { left: 60%; animation-delay: 1s; }
@keyframes rise { 0% { transform: translateY(0); opacity: 0; } 50% { opacity: 0.5; } 100% { transform: translateY(-20px); opacity: 0; } }

/* 6. Fireflies (for Lake Overlay) */
.firefly {
    position: absolute; width: 4px; height: 4px; background: #ffff00;
    box-shadow: 0 0 10px #ffff00; border-radius: 50%;
    animation: floatFirefly 5s infinite ease-in-out alternate;
}
@keyframes floatFirefly {
    from { transform: translate(0, 0); opacity: 0.2; }
    to { transform: translate(20px, -20px); opacity: 1; }
}

/* 7. Modal / Overlay */
#ring-overlay {
    backdrop-filter: blur(5px);
}
#ring-content {
    transition: transform 0.7s cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* 8. Office Teapot */
#office-note {
    pointer-events: none; /* Let clicks pass through until revealed */
}
.bg-red-twin-peaks {
    background-color: #5e0000; /* Более глубокий красный для фона секции */
}